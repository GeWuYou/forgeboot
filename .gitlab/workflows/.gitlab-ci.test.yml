stages:
  - build
  - publish

# ğŸ§ª test æ„å»º
build:
  stage: build
  rules:
    - if: '$CI_COMMIT_BRANCH == "test"'
  script:
    - ./gradlew clean build
  tags:
    - java

# ğŸ§ª test å‘å¸ƒ SNAPSHOT åŒ…ï¼ˆå…è®¸è¦†ç›–ï¼‰
publish:
  stage: publish
  needs: ["build"]
  rules:
    - if: '$CI_COMMIT_BRANCH == "test"'
  script:
    - echo "ğŸ”§ æˆäºˆ gradlew æ‰§è¡Œæƒé™..."
    - chmod +x gradlew
    - ./gradlew publishMavenJavaPublicationToGitLabRepository
  tags:
    - java
