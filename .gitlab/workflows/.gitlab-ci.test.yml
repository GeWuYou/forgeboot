stages:
  - publish
# 🧪 test 发布 SNAPSHOT 包（允许覆盖）
publish:
  rules:
    - if: '$CI_COMMIT_BRANCH == "test" && $CI_COMMIT_MESSAGE !~ /(?i)\b(ci|docs?|documentation)\b/'
  stage: publish
  script:
    - echo "🔧 授予 gradlew 执行权限..."
    - chmod +x gradlew
    - ./gradlew clean publishMavenPublicationToGitLabRepository --no-daemon --refresh-dependencies
  tags: [ java ]
